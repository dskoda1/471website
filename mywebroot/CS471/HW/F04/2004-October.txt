From antongiulio@email.it  Fri Oct  1 14:27:30 2004
Return-Path: <antongiulio@email.it>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id 362043B0B78
	for <gnome-devel-list@gnome.org>; Fri,  1 Oct 2004 14:27:30 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 05045-05 for <gnome-devel-list@gnome.org>;
	Fri,  1 Oct 2004 14:27:28 -0400 (EDT)
Received: from smtp-out2.email.it (smtp-out2.email.it [80.247.70.7])
	by menubar.gnome.org (Postfix) with ESMTP id 9DFD53B0D55
	for <gnome-devel-list@gnome.org>; Fri,  1 Oct 2004 14:27:27 -0400 (EDT)
Received: by smtp-out2.email.it (Email.it, from userid 101)
	id 628AC1BC003; Fri,  1 Oct 2004 20:27:34 +0200 (CEST)
Received: from localhost (host138-229.pool80116.interbusiness.it
	[80.116.229.138])by smtp-out2.email.it (Email.it) with ESMTP id
	920B91BC003for <gnome-devel-list@gnome.org>;
	Fri,  1 Oct 2004 20:27:33 +0200 (CEST)
Date: Fri, 1 Oct 2004 18:55:08 +0200
From: antongiulio <antongiulio@email.it>
To: gnome-devel-list@gnome.org
Message-Id: <20041001185508.57c7dfb0.antongiulio@email.it>
In-Reply-To: <1096532075.3869.2.camel@shadow.local>
References: <mailman.0.1093599917.18082.gnome-devel-list@gnome.org><20040827132859.39cda7b6.my_mailing_lists@email.it><1093973486.16323.15.camel@megumi><20040929171719.245ca017.antongiulio@email.it><20040929190507.3a998348.antongiulio@email.it><1096519876.3578.9.camel@shadow.local><20040930083324.33221429.antongiulio@email.it><1096532075.3869.2.camel@shadow.local>
X-Mailer: Sylpheed version 0.9.12 (GTK+ 1.2.10; i686-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Copyrighted-Material: Please visit http://www.email.it/ita/privacy.html
X-Virus-Scanned: by amavisd-new at gnome.org
Subject: Menu extern control
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Fri, 01 Oct 2004 18:27:30 -0000

Hi,

I'm developing an app. This app includes a menu and toolbar. I have noticed with gnome-tool "Preferences toolbar and tools" when I choose "Show icons" or "Icons and names both" many apps work properly, but my app not... what is the right way to include this function in my app?

This functionality is not include in HIG-2.0? I don't remember to have read it

Thanks,
Giulio
 
 
 --
 Email.it, the professional e-mail, gratis per te: http://www.email.it/f
 
 Sponsor:
 Il tuo sito web primo nei Motori di Ricerca? 
* Partecipa al Workshop Nazionale SEO Italia 2004 - clicca qui 
 Clicca qui: http://adv.email.it/cgi-bin/foclick.cgi?mid=2799&d=1-10
From lucas@lunix.com.ar  Fri Oct  1 18:51:00 2004
Return-Path: <lucas@lunix.com.ar>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id 010F03B08B9
	for <gnome-devel-list@gnome.org>; Fri,  1 Oct 2004 18:51:00 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 16482-07 for <gnome-devel-list@gnome.org>;
	Fri,  1 Oct 2004 18:50:57 -0400 (EDT)
Received: from debian1.lunix.com.ar (unknown [69.55.226.169])
	by menubar.gnome.org (Postfix) with ESMTP id E72BD3B09C2
	for <gnome-devel-list@gnome.org>; Fri,  1 Oct 2004 18:50:54 -0400 (EDT)
Received: from zeloran.casa.net (localhost [127.0.0.1])
	by debian1.lunix.com.ar (8.13.1/8.13.1/Debian-13) with ESMTP id
	i91MoqqY021075
	for <gnome-devel-list@gnome.org>; Fri, 1 Oct 2004 19:50:54 -0300
Received: by zeloran.casa.net (Postfix, from userid 33)
	id C58DC18352; Fri,  1 Oct 2004 19:50:51 -0300 (ART)
To: gnome-devel-list@gnome.org
Received: from 200.43.172.3 (auth. user ldipenti@localhost)
	by lucas.lunix.com.ar with HTTP; Fri, 01 Oct 2004 19:50:51 -0300
X-IlohaMail-Blah: ldipenti@localhost
X-IlohaMail-Method: mail() [mem]
X-IlohaMail-Dummy: moo
X-Mailer: IlohaMail/0.8.13 (On: lucas.lunix.com.ar)
Message-ID: <rDWHonXJ.1096671051.6509580.ldipenti@localhost>
From: "Lucas Di Pentima" <lucas@lunix.com.ar>
Bounce-To: "Lucas Di Pentima" <lucas@lunix.com.ar>
Errors-To: "Lucas Di Pentima" <lucas@lunix.com.ar>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Date: Fri,  1 Oct 2004 19:50:51 -0300 (ART)
X-Virus-Scanned: by amavisd-new at gnome.org
Subject: Custom gobject property's validation
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Fri, 01 Oct 2004 22:51:00 -0000


Hi people!

I'm developing a VGA Planets clients for GNOME called "GNOME War Pad",
and I'm learning about GObject's property framework. Today my
gobject's properties are implemented as simple members of a private
structura within the gobject, and the get/set functions were written by
me, but I'm interested in the features that GObject's paramaters give
to the developer, such as automatic signal emission when a value changes.

My doubt about "migrating" to this system is that I didn't  found any
reference about custom validators, every parameter type has some basic
validation feature (like min and max values for integers, for example)
but I'll need some extra checking in some attributes. So the question
is: how GNOME deal with this case? I don't think it's a rare case...is
there a way to register a validation function?

Best regards,

Lucas Di Pentima - Santa Fe - Argentina
LUNIX Soluciones S.R.L.
Jabber ID: lucas@lunix.com.ar
ICQ: 6782045
From lucas@lunix.com.ar  Sat Oct  2 01:47:58 2004
Return-Path: <lucas@lunix.com.ar>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id CAC1E3B0AA2
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 01:47:58 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 28030-01 for <gnome-devel-list@gnome.org>;
	Sat,  2 Oct 2004 01:47:56 -0400 (EDT)
Received: from debian1.lunix.com.ar (unknown [69.55.226.169])
	by menubar.gnome.org (Postfix) with ESMTP id 530453B0834
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 01:47:56 -0400 (EDT)
Received: from zeloran.casa.net (localhost [127.0.0.1])
	by debian1.lunix.com.ar (8.13.1/8.13.1/Debian-13) with ESMTP id
	i925lb38019232
	for <gnome-devel-list@gnome.org>; Sat, 2 Oct 2004 02:47:48 -0300
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by zeloran.casa.net (Postfix) with ESMTP id 30B2518352
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 02:47:34 -0300 (ART)
Message-ID: <415E40F1.9010906@lunix.com.ar>
Date: Sat, 02 Oct 2004 02:47:29 -0300
From: Lucas Di Pentima <lucas@lunix.com.ar>
User-Agent: Mozilla Thunderbird 0.7.3 (X11/20040803)
X-Accept-Language: es-ar, es, en
MIME-Version: 1.0
To: GNOME Devel List <gnome-devel-list@gnome.org>
X-Enigmail-Version: 0.85.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="------------enigD09EC4F47F1A33E7FB440175"
X-Virus-Scanned: by amavisd-new at gnome.org
Subject: Question on emission hooks
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Sat, 02 Oct 2004 05:47:59 -0000

This is an OpenPGP/MIME signed message (RFC 2440 and 3156)
--------------enigD09EC4F47F1A33E7FB440175
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hello,

I've read the tutorial on http://le-hacker.org/papers/gobject about 
gobject's signals, properties, etc. and started to play a little on my 
project with this.

What I don't understand completely are the emission hooks, from the 
tutorial I can say that a special callback can be connected to a signal 
and will be called on *any* emission of that signal. I have various 
gobjects subclasses defined on my project and checked their "notify" 
signal id, all gave me the number "1".

This value is then feeded to the g_signal_add_emission_hook, so any 
gobject "notify" signal will trigger the same emission hook, am I correct?

I tried this code:

------------------------------------------------------------------
static gboolean
notify_emission_hook (GSignalInvocationHint *ihint,
		      guint                  n_param_values,
		      const GValue          *param_values,
		      gpointer               data)
{
   g_message ("HOOK!!!");
   return TRUE;
}


g_signal_add_emission_hook (g_signal_lookup("notify", GWP_TYPE_SHIP),
			    0, /* detail */
			    notify_emission_hook,
			    NULL, /* data */
			    (GDestroyNotify) NULL);
--------------------------------------------------------------


And on console I got this message:

GLib-GObject-WARNING **: gsignal.c:829: invalid signal id `1'

I suppose the signal id '1' is valid, but I don't understand why this 
message appear, can somebody explain me all this? my head is a mess :-)

Regards,
-- 
Lucas Di Pentima - Santa Fe, Argentina - Jabber ID: lucas@lunix.com.ar
LUNIX: Soluciones en GNU/Linux - http://www.lunix.com.ar
GnuPG Public Key:
http://random.sks.keyserver.penguin.de:11371/pks/lookup?op=get&search=0x6AA54FC9
Key fingerprint = BD3B 08C4 661A 8C3B 1855  740C 8F98 3FCF 6AA5 4FC9

--------------enigD09EC4F47F1A33E7FB440175
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFBXkD1j5g/z2qlT8kRAmK8AJ9hswPXm9vOKcIjYp5fbUCFprrcFACguhqT
EHByB1QMu3VPuQlXoLMa9NM=
=uT7l
-----END PGP SIGNATURE-----

--------------enigD09EC4F47F1A33E7FB440175--
From nshmyrev@yandex.ru  Sat Oct  2 03:55:26 2004
Return-Path: <nshmyrev@yandex.ru>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id 4EA663B06B1
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 03:55:26 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 31335-03 for <gnome-devel-list@gnome.org>;
	Sat,  2 Oct 2004 03:55:24 -0400 (EDT)
Received: from hq.sectorb.msk.ru (petaflop.b.gz.ru [217.67.124.5])
	by menubar.gnome.org (Postfix) with ESMTP id CEA2F3B07DB
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 03:55:23 -0400 (EDT)
Received: from [172.16.14.71] (shadow.local [172.16.14.71])
	by hq.sectorb.msk.ru (Postfix) with ESMTP id 26FAC821;
	Sat,  2 Oct 2004 11:55:22 +0400 (MSD)
From: "Nickolay V. Shmyrev" <nshmyrev@yandex.ru>
To: Lucas Di Pentima <lucas@lunix.com.ar>
In-Reply-To: <rDWHonXJ.1096671051.6509580.ldipenti@localhost>
References: <rDWHonXJ.1096671051.6509580.ldipenti@localhost>
Content-Type: text/plain
Date: Sat, 02 Oct 2004 11:55:26 +0400
Message-Id: <1096703726.3583.4.camel@shadow.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.0 (2.0.0-2) 
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new at gnome.org
Cc: Gnome Development <gnome-devel-list@gnome.org>
Subject: Re: Custom gobject property's validation
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Sat, 02 Oct 2004 07:55:26 -0000

Probably you need to start with reading a tutorial, many of them located
in 

http://www.developer.gnome.org

For example, this one:

http://le-hacker.org/papers/gobject/

You need to add signal to object when you create object class. About
properties, you can check their values during property-get/property-set
function.

From nshmyrev@yandex.ru  Sat Oct  2 04:16:49 2004
Return-Path: <nshmyrev@yandex.ru>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id A79FD3B0677
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 04:16:49 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 32103-02 for <gnome-devel-list@gnome.org>;
	Sat,  2 Oct 2004 04:16:48 -0400 (EDT)
Received: from hq.sectorb.msk.ru (petaflop.b.gz.ru [217.67.124.5])
	by menubar.gnome.org (Postfix) with ESMTP id 4C78D3B08CF
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 04:16:48 -0400 (EDT)
Received: from [172.16.14.71] (shadow.local [172.16.14.71])
	by hq.sectorb.msk.ru (Postfix) with ESMTP id A8CC2C81;
	Sat,  2 Oct 2004 12:16:47 +0400 (MSD)
From: "Nickolay V. Shmyrev" <nshmyrev@yandex.ru>
To: antongiulio@email.it
Content-Type: text/plain
Date: Sat, 02 Oct 2004 12:16:52 +0400
Message-Id: <1096705012.3583.12.camel@shadow.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.0 (2.0.0-2) 
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new at gnome.org
Cc: Gnome Development <gnome-devel-list@gnome.org>
Subject: Re:Menu extern control
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Sat, 02 Oct 2004 08:16:49 -0000

You should use GnomeApp from libgnomeui to create application menus and
toolbar. 

Those trick is done with GConf, there is keys in

/desktop/gnome/interface/toolbar_style
/desktop/gnome/interface/menus_detachable
.....

which describe how toolbar and menus should look like. Probably, you
need to add notification from gconf and change the toolbar look
accordingly. But it is already implemented in libgnomeui.

But my opinion is that it is not so great problem in application.



From lucas@lunix.com.ar  Sat Oct  2 08:47:25 2004
Return-Path: <lucas@lunix.com.ar>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id C38A13B0A3C
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 08:47:25 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 10112-01 for <gnome-devel-list@gnome.org>;
	Sat,  2 Oct 2004 08:47:24 -0400 (EDT)
Received: from debian1.lunix.com.ar (unknown [69.55.226.169])
	by menubar.gnome.org (Postfix) with ESMTP id 3AC383B111A
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 08:47:24 -0400 (EDT)
Received: from zeloran.casa.net (localhost [127.0.0.1])
	by debian1.lunix.com.ar (8.13.1/8.13.1/Debian-13) with ESMTP id
	i92ClFJQ025408; Sat, 2 Oct 2004 09:47:18 -0300
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by zeloran.casa.net (Postfix) with ESMTP id 5745B18352;
	Sat,  2 Oct 2004 09:47:14 -0300 (ART)
Message-ID: <415EA351.8050109@lunix.com.ar>
Date: Sat, 02 Oct 2004 09:47:13 -0300
From: Lucas Di Pentima <lucas@lunix.com.ar>
User-Agent: Mozilla Thunderbird 0.7.3 (X11/20040803)
X-Accept-Language: es-ar, es, en
MIME-Version: 1.0
To: "Nickolay V. Shmyrev" <nshmyrev@yandex.ru>
References: <rDWHonXJ.1096671051.6509580.ldipenti@localhost>
	<1096703726.3583.4.camel@shadow.local>
In-Reply-To: <1096703726.3583.4.camel@shadow.local>
X-Enigmail-Version: 0.85.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="------------enig104FD5C347B0562B60840301"
X-Virus-Scanned: by amavisd-new at gnome.org
Cc: Gnome Development <gnome-devel-list@gnome.org>
Subject: Re: Custom gobject property's validation
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Sat, 02 Oct 2004 12:47:25 -0000

This is an OpenPGP/MIME signed message (RFC 2440 and 3156)
--------------enig104FD5C347B0562B60840301
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hi Nickolay

Nickolay V. Shmyrev wrote:
> Probably you need to start with reading a tutorial, many of them located
> in 
> http://www.developer.gnome.org
> For example, this one:
> http://le-hacker.org/papers/gobject/
> You need to add signal to object when you create object class. About
Yes, I've read all the tutorials, I'm developing this GNOME application 
since 2002, it's just that I recently put attention to the GObject & 
signal features.

Here you're saying that the GObject class don't set up the "notify" 
signal for itself? I should add it so GObject will amit it automatically 
when a property changes?

> properties, you can check their values during property-get/property-set
> function.
Thanks :-)

Regards,
-- 
Lucas Di Pentima - Santa Fe, Argentina - Jabber ID: lucas@lunix.com.ar
LUNIX: Soluciones en GNU/Linux - http://www.lunix.com.ar
GnuPG Public Key:
http://random.sks.keyserver.penguin.de:11371/pks/lookup?op=get&search=0x6AA54FC9
Key fingerprint = BD3B 08C4 661A 8C3B 1855  740C 8F98 3FCF 6AA5 4FC9

--------------enig104FD5C347B0562B60840301
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFBXqNRj5g/z2qlT8kRAnPEAKCObW8SbBZZjpHEux2lGZzq1McGCgCgoVvW
EMCnb7iLu5fcr1rCmwCx80E=
=qjAL
-----END PGP SIGNATURE-----

--------------enig104FD5C347B0562B60840301--
From nshmyrev@yandex.ru  Sat Oct  2 10:31:21 2004
Return-Path: <nshmyrev@yandex.ru>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id 49BFE3B131B
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 10:31:19 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 14890-02 for <gnome-devel-list@gnome.org>;
	Sat,  2 Oct 2004 10:31:16 -0400 (EDT)
Received: from hq.sectorb.msk.ru (petaflop.b.gz.ru [217.67.124.5])
	by menubar.gnome.org (Postfix) with ESMTP id 1ADE33B1722
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 10:30:31 -0400 (EDT)
Received: from [172.16.14.71] (shadow.local [172.16.14.71])
	by hq.sectorb.msk.ru (Postfix) with ESMTP id 15D5B14EC;
	Sat,  2 Oct 2004 18:30:30 +0400 (MSD)
From: "Nickolay V. Shmyrev" <nshmyrev@yandex.ru>
To: Lucas Di Pentima <lucas@lunix.com.ar>
In-Reply-To: <415EA351.8050109@lunix.com.ar>
References: <rDWHonXJ.1096671051.6509580.ldipenti@localhost>
	<1096703726.3583.4.camel@shadow.local> <415EA351.8050109@lunix.com.ar>
Content-Type: text/plain
Date: Sat, 02 Oct 2004 18:30:30 +0400
Message-Id: <1096727430.27728.11.camel@shadow.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.0 (2.0.0-2) 
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new at gnome.org
Cc: Gnome Development <gnome-devel-list@gnome.org>
Subject: Re: Question on emission hooks
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Sat, 02 Oct 2004 14:31:21 -0000

Hello.

Sorry for style of my first answer, it seems that you have quite old
glib, because now (in 2.4.0 )it is impossible to g_signal_lookup on
G_TYPE_OBJECT, since it is not G_TYPE_IS_INSTANTIABLE, that's why I
thought that you are trying to to add emission hook to "notify" signale
of your type GWP_TYPE_SHIP, not G_TYPE_OBJECT. 

Even if you can get signal_id, it is not clear, that you can add
emission hook to that signal, because signal can have flag
G_SIGNAL_NO_HOOKS. The "notify" signal of g_object is exactly such
signal, that is why you get warning message. 



Look at glib sources:



  gobject_signals[NOTIFY] =
    g_signal_new ("notify",
                  G_TYPE_FROM_CLASS (class),
                  G_SIGNAL_RUN_FIRST | G_SIGNAL_NO_RECURSE |
G_SIGNAL_DETAILED | G_STRUCT_OFFSET (GObjectClass, notify),
                  NULL, NULL,
                  g_cclosure_marshal_VOID__PARAM,
                  G_TYPE_NONE,
                  1, G_TYPE_PARAM);




g_signal_add_emission_hook (guint               signal_id,
                            GQuark              detail,
                            GSignalEmissionHook hook_func,
                            gpointer            hook_data,
                            GDestroyNotify      data_destroy)
{
  static gulong seq_hook_id = 1;
  SignalNode *node;
  GHook *hook;
  SignalHook *signal_hook;
                                                                                
  g_return_val_if_fail (signal_id > 0, 0);
  g_return_val_if_fail (hook_func != NULL, 0);
                                                                                
  SIGNAL_LOCK ();
  node = LOOKUP_SIGNAL_NODE (signal_id);
  if (!node || node->destroyed || (node->flags & G_SIGNAL_NO_HOOKS))
    {
      g_warning ("%s: invalid signal id `%u'", G_STRLOC, signal_id);
      SIGNAL_UNLOCK ();
      return 0;
    }

Otherwise, all goes fine:

#include <gtk/gtk.h>

static gboolean
clicked_emission_hook (GSignalInvocationHint *ihint,
      guint                  n_param_values,
      const GValue          *param_values,
      gpointer               data)
{
  g_message ("HOOK!!!");
  return TRUE;
}

static gboolean
on_clicked (GObject *button,   gpointer data)
{
  g_message ("ACTIVATE!!!");
  return TRUE;
}


int main (int argc, char *argv[]) {
  
  GtkWidget *window;
  GtkWidget *button;
  
  gtk_init (&argc, &argv);

  
  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  button = gtk_button_new_with_label ("Push me");
  gtk_container_add (GTK_CONTAINER(window), button);
  gtk_widget_show_all (window);    

  g_signal_add_emission_hook (g_signal_lookup("clicked",
GTK_TYPE_BUTTON),
  0,  clicked_emission_hook, NULL, NULL);
  
  g_signal_connect (G_OBJECT(button), "clicked", G_CALLBACK(on_clicked),
NULL);
  
  gtk_main ();
  
  return 0;
}







From lucas@lunix.com.ar  Sat Oct  2 10:54:30 2004
Return-Path: <lucas@lunix.com.ar>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id 205263B0E3F
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 10:54:30 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 16040-10 for <gnome-devel-list@gnome.org>;
	Sat,  2 Oct 2004 10:54:29 -0400 (EDT)
Received: from debian1.lunix.com.ar (unknown [69.55.226.169])
	by menubar.gnome.org (Postfix) with ESMTP id C65F43B0CB2
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 10:54:28 -0400 (EDT)
Received: from zeloran.casa.net (localhost [127.0.0.1])
	by debian1.lunix.com.ar (8.13.1/8.13.1/Debian-13) with ESMTP id
	i92EsQOM001892; Sat, 2 Oct 2004 11:54:27 -0300
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by zeloran.casa.net (Postfix) with ESMTP id 0E28518352;
	Sat,  2 Oct 2004 11:54:25 -0300 (ART)
Message-ID: <415EC11D.50500@lunix.com.ar>
Date: Sat, 02 Oct 2004 11:54:21 -0300
From: Lucas Di Pentima <lucas@lunix.com.ar>
User-Agent: Mozilla Thunderbird 0.7.3 (X11/20040803)
X-Accept-Language: es-ar, es, en
MIME-Version: 1.0
To: "Nickolay V. Shmyrev" <nshmyrev@yandex.ru>
References: <rDWHonXJ.1096671051.6509580.ldipenti@localhost>	
	<1096703726.3583.4.camel@shadow.local>
	<415EA351.8050109@lunix.com.ar>
	<1096727430.27728.11.camel@shadow.local>
In-Reply-To: <1096727430.27728.11.camel@shadow.local>
X-Enigmail-Version: 0.85.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="------------enig98F5037AED94C03E196482BD"
X-Virus-Scanned: by amavisd-new at gnome.org
Cc: Gnome Development <gnome-devel-list@gnome.org>
Subject: Re: Question on emission hooks
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Sat, 02 Oct 2004 14:54:30 -0000

This is an OpenPGP/MIME signed message (RFC 2440 and 3156)
--------------enig98F5037AED94C03E196482BD
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Nickolay,

Nickolay V. Shmyrev wrote:

> Sorry for style of my first answer, it seems that you have quite old
> glib, because now (in 2.4.0 )it is impossible to g_signal_lookup on
> G_TYPE_OBJECT, since it is not G_TYPE_IS_INSTANTIABLE, that's why I
> thought that you are trying to to add emission hook to "notify" signale
> of your type GWP_TYPE_SHIP, not G_TYPE_OBJECT. 
I'm using glib 2.4.0, and what I wanted to do (I don't know if it's 
possible) is to use a emission hook callback every time one of my own 
types's properties changes. I have 500 GWP_TYPE_SHIPs on my application, 
so I don't want to connect to the "notify" signal in every ship.

What I don't know is if I have a GwpShip object that is a subclass of 
GObject...the "notify" signal if inherited? I tried both...I defined it 
on GwpShip and got the same signal_id = 1, I changed its name to 
something else and got a higher number and the error message disappeared 
when I connected an emission hook to it...so my code not so bad written :-)

> Even if you can get signal_id, it is not clear, that you can add
> emission hook to that signal, because signal can have flag
> G_SIGNAL_NO_HOOKS. The "notify" signal of g_object is exactly such
> signal, that is why you get warning message. 
So I cannot override it? Nevertheless the code you copied from glib's 
sources don't have the G_SIGNAL_NO_HOOKS flag.

Regards,
-- 
Lucas Di Pentima - Santa Fe, Argentina - Jabber ID: lucas@lunix.com.ar
LUNIX: Soluciones en GNU/Linux - http://www.lunix.com.ar
GnuPG Public Key:
http://random.sks.keyserver.penguin.de:11371/pks/lookup?op=get&search=0x6AA54FC9
Key fingerprint = BD3B 08C4 661A 8C3B 1855  740C 8F98 3FCF 6AA5 4FC9

--------------enig98F5037AED94C03E196482BD
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFBXsEgj5g/z2qlT8kRApNkAKDZBBMXT48yRIk5mlW+rTn52uBsjwCg3mfl
NQOEWhXA0432P2ZeMTdhzMU=
=yIKw
-----END PGP SIGNATURE-----

--------------enig98F5037AED94C03E196482BD--
From nshmyrev@yandex.ru  Sat Oct  2 10:55:31 2004
Return-Path: <nshmyrev@yandex.ru>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id D91783B0EF1
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 10:55:31 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 16214-04 for <gnome-devel-list@gnome.org>;
	Sat,  2 Oct 2004 10:55:29 -0400 (EDT)
Received: from hq.sectorb.msk.ru (petaflop.b.gz.ru [217.67.124.5])
	by menubar.gnome.org (Postfix) with ESMTP id BBCF93B0FED
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 10:55:22 -0400 (EDT)
Received: from [172.16.14.71] (shadow.local [172.16.14.71])
	by hq.sectorb.msk.ru (Postfix) with ESMTP id 1B9947B5
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 18:55:22 +0400 (MSD)
From: "Nickolay V. Shmyrev" <nshmyrev@yandex.ru>
To: Gnome Development <gnome-devel-list@gnome.org>
In-Reply-To: <1096727430.27728.11.camel@shadow.local>
References: <rDWHonXJ.1096671051.6509580.ldipenti@localhost>
	<1096703726.3583.4.camel@shadow.local> <415EA351.8050109@lunix.com.ar>
	<1096727430.27728.11.camel@shadow.local>
Content-Type: text/plain
Date: Sat, 02 Oct 2004 18:55:22 +0400
Message-Id: <1096728922.27728.14.camel@shadow.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.0 (2.0.0-2) 
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new at gnome.org
Subject: Re: Question on emission hooks
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Sat, 02 Oct 2004 14:55:32 -0000

I also filled bug #154299 with patch to fix gobject documentation.

From nshmyrev@yandex.ru  Sat Oct  2 11:39:39 2004
Return-Path: <nshmyrev@yandex.ru>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id 228C23B1011
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 11:39:39 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 17765-10 for <gnome-devel-list@gnome.org>;
	Sat,  2 Oct 2004 11:39:36 -0400 (EDT)
Received: from hq.sectorb.msk.ru (petaflop.b.gz.ru [217.67.124.5])
	by menubar.gnome.org (Postfix) with ESMTP id B27B83B0AEF
	for <gnome-devel-list@gnome.org>; Sat,  2 Oct 2004 11:39:35 -0400 (EDT)
Received: from [172.16.14.71] (shadow.local [172.16.14.71])
	by hq.sectorb.msk.ru (Postfix) with ESMTP id 7AB6014B8;
	Sat,  2 Oct 2004 19:39:30 +0400 (MSD)
From: "Nickolay V. Shmyrev" <nshmyrev@yandex.ru>
To: Lucas Di Pentima <lucas@lunix.com.ar>
In-Reply-To: <415EC11D.50500@lunix.com.ar>
References: <rDWHonXJ.1096671051.6509580.ldipenti@localhost>
	<1096703726.3583.4.camel@shadow.local> <415EA351.8050109@lunix.com.ar>
	<1096727430.27728.11.camel@shadow.local> <415EC11D.50500@lunix.com.ar>
Content-Type: multipart/mixed; boundary="=-8QaoBXSSPOrHw1FnG/Po"
Date: Sat, 02 Oct 2004 19:39:31 +0400
Message-Id: <1096731571.27728.15.camel@shadow.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.0 (2.0.0-2) 
X-Virus-Scanned: by amavisd-new at gnome.org
Cc: Gnome Development <gnome-devel-list@gnome.org>
Subject: Re: Question on emission hooks
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Sat, 02 Oct 2004 15:39:39 -0000


--=-8QaoBXSSPOrHw1FnG/Po
Content-Type: text/plain
Content-Transfer-Encoding: 7bit


> I'm using glib 2.4.0, and what I wanted to do (I don't know if it's 
> possible) is to use a emission hook callback every time one of my own 
> types's properties changes. I have 500 GWP_TYPE_SHIPs on my application, 
> so I don't want to connect to the "notify" signal in every ship.

Of course, it is possible. Try attached example



--=-8QaoBXSSPOrHw1FnG/Po
Content-Disposition: attachment; filename=test.c
Content-Type: text/x-csrc; name=test.c; charset=KOI8-R
Content-Transfer-Encoding: 7bit

#include <glib-object.h>
#include <glib.h>

#define TEST_TYPE_A (test_a_get_type())

typedef struct _TestA TestA;
typedef struct _TestAClass TestAClass;

struct _TestA {
  GObject parent;
  
  gint v;
};

struct _TestAClass {
  GObjectClass parent_class;

  void (* property_changed) (TestA *self);
};

static void
test_a_class_init (TestAClass *class);

static void
test_a_init (TestA *test_a);

static GType								
test_a_get_type (void)					
{							
  static GType test_a_type = 0;					
							
  if (!test_a_type)						
    {								
      static const GTypeInfo test_a_info =			
	{							
	  sizeof (TestAClass),				
	  (GBaseInitFunc) NULL,				
	  (GBaseFinalizeFunc) NULL,				
	  (GClassInitFunc) test_a_class_init,				
	  (GClassFinalizeFunc) NULL,				
	  NULL,           /* class_data */			
	  sizeof (TestA),					
	  0,             /* n_prelocs */			
	  (GInstanceInitFunc) test_a_init			
	};							
								
      test_a_type = g_type_register_static (G_TYPE_OBJECT,	
					    "TestA",		
					    &test_a_info, 0);	
    }								
								
  return test_a_type;						
}


static guint property_signal_id = 0;

static void
test_a_get_property (GObject         *object,
                     guint            prop_id,
                     GValue          *value,
                     GParamSpec      *pspec)
{
  TestA* test_a = (TestA*) object;
  
  if (prop_id == 1)
      g_value_set_int (value, test_a->v);
  else
    G_OBJECT_WARN_INVALID_PROPERTY_ID (object, prop_id, pspec);
}
static void
test_a_set_property (GObject         *object,
                     guint            prop_id,
                     const GValue    *value,
                     GParamSpec      *pspec)
{
  TestA *test_a = (TestA*)object;
  
  g_signal_emit (object, property_signal_id, 0, NULL);
  
  if (prop_id == 1)
    test_a->v = g_value_get_int (value);
  else
    G_OBJECT_WARN_INVALID_PROPERTY_ID (object, prop_id, pspec);
}


static void
test_a_class_init (TestAClass *class)
{
  GObjectClass *gobject_class = G_OBJECT_CLASS (class);


  property_signal_id = g_signal_new ("property_changed",
				TEST_TYPE_A,
				G_SIGNAL_RUN_LAST,
				G_STRUCT_OFFSET (TestAClass, property_changed),
				NULL, NULL,
				g_cclosure_marshal_VOID__VOID,
				G_TYPE_NONE, 0, NULL);

  gobject_class->set_property = test_a_set_property;
  gobject_class->get_property = test_a_get_property;
  
  g_object_class_install_property (gobject_class,
                                   1,
                                   g_param_spec_int  ("pro",
                                                      "Some property",
                                                      "Some property",
						      0, 1,
						      0,
                                                      G_PARAM_READABLE | G_PARAM_WRITABLE));
}

static void
test_a_init (TestA *test_a) 
{
  return;
}

static void
on_prop_changed (GObject* obj, gboolean data)
{
  g_message ("Property changed callback");
}

static gboolean
prop_changed_hook (GSignalInvocationHint *ihint,
      guint                  n_param_values,
      const GValue          *param_values,
      gpointer               data)
{
  g_message ("Property changed hook");
  return TRUE;
}



int main( int   argc, 
          char *argv[] )
{
    TestA *object;
    
    g_type_init();
    
    object = g_object_new (TEST_TYPE_A, NULL);
    
    g_signal_connect (G_OBJECT (object), "property_changed", G_CALLBACK(on_prop_changed), NULL);
    
    g_signal_add_emission_hook (g_signal_lookup("property_changed", TEST_TYPE_A),
    0, prop_changed_hook,  NULL, NULL);
    
    g_object_set (object, "pro", 1, NULL);
    
    return 0;
}

--=-8QaoBXSSPOrHw1FnG/Po--

From lucas@lunix.com.ar  Sun Oct  3 22:29:12 2004
Return-Path: <lucas@lunix.com.ar>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id 63C183B0B41
	for <gnome-devel-list@gnome.org>; Sun,  3 Oct 2004 22:29:12 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 02533-06 for <gnome-devel-list@gnome.org>;
	Sun,  3 Oct 2004 22:29:11 -0400 (EDT)
Received: from debian1.lunix.com.ar (unknown [69.55.226.169])
	by menubar.gnome.org (Postfix) with ESMTP id 0B0283B08D6
	for <gnome-devel-list@gnome.org>; Sun,  3 Oct 2004 22:29:11 -0400 (EDT)
Received: from zeloran.casa.net (localhost [127.0.0.1])
	by debian1.lunix.com.ar (8.13.1/8.13.1/Debian-13) with ESMTP id
	i942SuH9021967; Sun, 3 Oct 2004 23:29:04 -0300
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by zeloran.casa.net (Postfix) with ESMTP id E844518352;
	Sun,  3 Oct 2004 23:28:42 -0300 (ART)
Message-ID: <4160B556.50207@lunix.com.ar>
Date: Sun, 03 Oct 2004 23:28:38 -0300
From: Lucas Di Pentima <lucas@lunix.com.ar>
User-Agent: Mozilla Thunderbird 0.7.3 (X11/20040803)
X-Accept-Language: es-ar, es, en
MIME-Version: 1.0
To: "Nickolay V. Shmyrev" <nshmyrev@yandex.ru>
X-Enigmail-Version: 0.85.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="------------enig82B1D2662EAEA7F3DCA55198"
X-Virus-Scanned: by amavisd-new at gnome.org
Cc: GNOME Devel List <gnome-devel-list@gnome.org>
Subject: Again with the emission hooks :-)
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Mon, 04 Oct 2004 02:29:12 -0000

This is an OpenPGP/MIME signed message (RFC 2440 and 3156)
--------------enig82B1D2662EAEA7F3DCA55198
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hi there Nickolay!

Well, I tried what you told me and it worked nicely as I said to you on 
the last email. Just in case I refresh your memory:

I have my GwpGameState class, which is a direct subclass of GObject. I 
installed some properties on it and I want to be notified every time any 
instance of class changes some of its values. From what I've read, the 
g_signal_add_emission_hook() function does the job.

On le-hacker's tutorial I've read that the gobject type system 
automatically emits a signal named "notify" every time some of its 
subclasses' instances changes a property value,  so I tried to install 
an emission hook on this "notify" signal. The problem is that when I try 
to do that I get the following warning:

GLib-GObject-WARNING **: gsignal.c:829: invalid signal id `1'

You told me that emiting my own signal will do the trick, I tried and it 
worked...but the tutorial said that already is being emitted the 
"notify" signal so what I did was connecting to that signal with 
g_signal_connect(), and surprisingly it worked! Now my question: Why in 
the name of the Great Gnome I cannot add an emission hook to that 
"notify" signal, even if it's not defined with the NO_HOOK flag, as you 
showed to me before? I'm very confused!

Thanks in advance for any comments
-- 
Lucas Di Pentima - Santa Fe, Argentina - Jabber ID: lucas@lunix.com.ar
LUNIX: Soluciones en GNU/Linux - http://www.lunix.com.ar
GnuPG Public Key:
http://random.sks.keyserver.penguin.de:11371/pks/lookup?op=get&search=0x6AA54FC9
Key fingerprint = BD3B 08C4 661A 8C3B 1855  740C 8F98 3FCF 6AA5 4FC9

--------------enig82B1D2662EAEA7F3DCA55198
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFBYLVaj5g/z2qlT8kRAso9AJ4xUc8c4WaSgyKFaQl6GZGT0vxJCwCbB2T9
dKnNSX1Ro0Clp4rZ9/2pxgw=
=64P9
-----END PGP SIGNATURE-----

--------------enig82B1D2662EAEA7F3DCA55198--
From prw@ceiriog1.demon.co.uk  Mon Oct  4 05:23:14 2004
Return-Path: <prw@ceiriog1.demon.co.uk>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id 0C6583B080D
	for <gnome-devel-list@gnome.org>; Mon,  4 Oct 2004 05:23:14 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 15549-07 for <gnome-devel-list@gnome.org>;
	Mon,  4 Oct 2004 05:23:13 -0400 (EDT)
Received: from anchor-post-33.mail.demon.net (anchor-post-33.mail.demon.net
	[194.217.242.91])
	by menubar.gnome.org (Postfix) with ESMTP id DC4163B0822
	for <gnome-devel-list@gnome.org>; Mon,  4 Oct 2004 05:23:12 -0400 (EDT)
Received: from pr-webmail-1.demon.net ([194.159.244.51]
	helo=pr-webmail-1.mail.demon.net)
	by anchor-post-33.mail.demon.net with esmtp (Exim 4.42)
	id 1CEP4U-000Mu1-Aw
	for gnome-devel-list@gnome.org; Mon, 04 Oct 2004 09:23:56 +0000
Received: from localhost ([127.0.0.1] helo=web.mail.demon.net)
	by pr-webmail-1.mail.demon.net with smtp (Exim 4.42)
	id 1CEP3l-000DgC-Cp
	for gnome-devel-list@gnome.org; Mon, 04 Oct 2004 10:23:09 +0100
Received: from ceiriog1.demon.co.uk ([194.129.135.161])
	by web.mail.demon.net with http; Mon, 04 Oct 2004 10:23:09 +0100
From: prw@ceiriog1.demon.co.uk
To: gnome-devel-list@gnome.org
Date: Mon, 04 Oct 2004 10:23:09 +0100
User-Agent: Demon-WebMail/2.0
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Message-Id: <20041004092312.DC4163B0822@menubar.gnome.org>
X-Virus-Scanned: by amavisd-new at gnome.org
Subject: Bug in i18n of GConf?
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Mon, 04 Oct 2004 09:23:14 -0000

Hi, 

I just compiled Gnome 2.8 from source on my Fedora Core 2 box.
On the first run I had several problems:

* No icons on menu items
* gnome-theme-manager failed to start with message
"The default theme schemas could not be found on your system.  This means that you probably don't have metacity installed, or that your gconf is configured incorrectly."

On further investigation I discovered that gconftool-2 now applies default
values only for the "C" locale, as shown in this ChangeLog entry:

2004-08-30  Mark McLoughlin  <mark@skynet.ie>
                                                                                
        Fix problem with schemas install. Bug #151334.
                                                                                
        * gconf/gconftool.c: (process_locale_info): install the
        global default in the C locale only.

Unfortunately this fix causes the problems I described above. I.e. I
have no default gtk_theme, and cannot set one because gnome-theme-manager
will not start without one. This only occurs if LANG is a recognized locale
in

/etc/gconf/gconf.xml.defaults/schemas/desktop/gnome/interface/%gconf.xml

If it is not (e.g. "en_GB.UTF-8") then GConf seemingly falls back on the
"C" locale. Eventually I ran system-config-language, which on FC2 sets
LANG to that value, and so I was able to work around the problem.
But this can't be the right solution, since it defeats the GConf
localization.

Is there something I'm missing, or should this go in bugzilla?


Peter Wainwright




From fherrera@onirica.com  Mon Oct  4 07:15:58 2004
Return-Path: <fherrera@onirica.com>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id 235083B07E6
	for <gnome-devel-list@gnome.org>; Mon,  4 Oct 2004 07:15:58 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 19725-05 for <gnome-devel-list@gnome.org>;
	Mon,  4 Oct 2004 07:15:56 -0400 (EDT)
Received: from eurielec.etsit.upm.es (uno.eurielec.etsit.upm.es
	[138.100.31.227])
	by menubar.gnome.org (Postfix) with ESMTP id 0A98B3B0BF7
	for <gnome-devel-list@gnome.org>; Mon,  4 Oct 2004 07:15:56 -0400 (EDT)
Received: from dos.eurielec.etsit.upm.es (dos.eurielec.etsit.upm.es
	[138.100.31.228]) by eurielec.etsit.upm.es (Postfix) with SMTP
	id D56CA4C8B; Mon,  4 Oct 2004 13:15:54 +0200 (CEST)
Received: by dos.eurielec.etsit.upm.es (sSMTP sendmail emulation);
	Mon,  4 Oct 2004 13:15:54 +0200
Date: Mon, 4 Oct 2004 13:15:54 +0200
From: Fernando Herrera <fherrera@onirica.com>
To: prw@ceiriog1.demon.co.uk
Message-ID: <20041004111554.GA5120@dos.eurielec.etsit.upm.es>
References: <20041004092312.DC4163B0822@menubar.gnome.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20041004092312.DC4163B0822@menubar.gnome.org>
X-Operating-System: Linux 2.6.8-1-k7 i686
User-Agent: Mutt/1.5.6+20040818i
X-Virus-Scanned: by amavisd-new at gnome.org
Cc: gnome-devel-list@gnome.org
Subject: Re: Bug in i18n of GConf?
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Mon, 04 Oct 2004 11:15:58 -0000



	Yes, this is a known bug:

	http://bugzilla.gnome.org/show_bug.cgi?id=152175

	It happens only in some situations when intltool-merge modifies the
order of locales in the final .schema file IIRC. Tha attached patch in that
bug should fix it.

Salu2


Mon, Oct 04, 2004 at 10:23:09AM +0100, prw@ceiriog1.demon.co.uk escribi:

>
>Hi, 
>
>I just compiled Gnome 2.8 from source on my Fedora Core 2 box.
>On the first run I had several problems:
>
>* No icons on menu items
>* gnome-theme-manager failed to start with message
>"The default theme schemas could not be found on your system.  This means that you probably don't have metacity installed, or that your gconf is configured incorrectly."
>
>On further investigation I discovered that gconftool-2 now applies default
>values only for the "C" locale, as shown in this ChangeLog entry:
>
>2004-08-30  Mark McLoughlin  <mark@skynet.ie>
>                                                                                
>        Fix problem with schemas install. Bug #151334.
>                                                                                
>        * gconf/gconftool.c: (process_locale_info): install the
>        global default in the C locale only.
>
>Unfortunately this fix causes the problems I described above. I.e. I
>have no default gtk_theme, and cannot set one because gnome-theme-manager
>will not start without one. This only occurs if LANG is a recognized locale
>in
>
>/etc/gconf/gconf.xml.defaults/schemas/desktop/gnome/interface/%gconf.xml
>
>If it is not (e.g. "en_GB.UTF-8") then GConf seemingly falls back on the
>"C" locale. Eventually I ran system-config-language, which on FC2 sets
>LANG to that value, and so I was able to work around the problem.
>But this can't be the right solution, since it defeats the GConf
>localization.
>
>Is there something I'm missing, or should this go in bugzilla?
>
>
>Peter Wainwright
>
>
>
>
>_______________________________________________
>gnome-devel-list mailing list
>gnome-devel-list@gnome.org
>http://mail.gnome.org/mailman/listinfo/gnome-devel-list

-- 
Fernando Herrera de las Heras
Onrica: anlisis, diseo e implantacin de soluciones informticas
http://www.onirica.com
From prw@ceiriog1.demon.co.uk  Tue Oct  5 16:48:45 2004
Return-Path: <prw@ceiriog1.demon.co.uk>
X-Original-To: gnome-devel-list@gnome.org
Delivered-To: gnome-devel-list@gnome.org
Received: from localhost (unknown [127.0.0.1])
	by menubar.gnome.org (Postfix) with ESMTP id E94E43B0B4D
	for <gnome-devel-list@gnome.org>; Tue,  5 Oct 2004 16:48:44 -0400 (EDT)
Received: from menubar.gnome.org ([12.107.209.248])
	by localhost (menubar.gnome.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 16806-10 for <gnome-devel-list@gnome.org>;
	Tue,  5 Oct 2004 16:48:40 -0400 (EDT)
Received: from ceiriog1.demon.co.uk (ceiriog1.demon.co.uk [194.222.75.230])
	by menubar.gnome.org (Postfix) with ESMTP id 6DAA83B0BD3
	for <gnome-devel-list@gnome.org>; Tue,  5 Oct 2004 16:48:39 -0400 (EDT)
Received: by ceiriog1.demon.co.uk (Postfix, from userid 1002)
	id E0931190AA0; Mon,  4 Oct 2004 19:41:35 +0100 (BST)
From: Peter Wainwright <prw@ceiriog1.demon.co.uk>
To: Fernando Herrera <fherrera@onirica.com>
In-Reply-To: <20041004111554.GA5120@dos.eurielec.etsit.upm.es>
References: <20041004092312.DC4163B0822@menubar.gnome.org>
	<20041004111554.GA5120@dos.eurielec.etsit.upm.es>
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-Id: <1096915282.28608.1.camel@ceiriog1.demon.co.uk>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 (1.4.6-2) 
Date: Mon, 04 Oct 2004 19:41:28 +0100
X-Virus-Scanned: by amavisd-new at gnome.org
Cc: gnome-devel-list@gnome.org
Subject: Re: Bug in i18n of GConf?
X-BeenThere: gnome-devel-list@gnome.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: GNOME development <gnome-devel-list.gnome.org>
List-Unsubscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=unsubscribe>
List-Archive: </archives>
List-Post: <mailto:gnome-devel-list@gnome.org>
List-Help: <mailto:gnome-devel-list-request@gnome.org?subject=help>
List-Subscribe: <http://mail.gnome.org/mailman/listinfo/gnome-devel-list>,
	<mailto:gnome-devel-list-request@gnome.org?subject=subscribe>
X-List-Received-Date: Tue, 05 Oct 2004 20:48:46 -0000

On Mon, 2004-10-04 at 12:15, Fernando Herrera wrote:
>=20
> 	Yes, this is a known bug:
>=20
> 	http://bugzilla.gnome.org/show_bug.cgi?id=3D152175
>=20
> 	It happens only in some situations when intltool-merge modifies the
> order of locales in the final .schema file IIRC. Tha attached patch in th=
at
> bug should fix it.
>=20
> Salu2

Thanks very much! That fixed it, indeed.

Peter Wainwright

>=20
>=20
> Mon, Oct 04, 2004 at 10:23:09AM +0100, prw@ceiriog1.demon.co.uk escribi=
=F3:
>=20
> >
> >Hi,=20
> >
> >I just compiled Gnome 2.8 from source on my Fedora Core 2 box.
> >On the first run I had several problems:
> >
> >* No icons on menu items
> >* gnome-theme-manager failed to start with message
> >"The default theme schemas could not be found on your system.  This mean=
s that you probably don't have metacity installed, or that your gconf is co=
nfigured incorrectly."
> >
> >On further investigation I discovered that gconftool-2 now applies defau=
lt
> >values only for the "C" locale, as shown in this ChangeLog entry:
> >
> >2004-08-30  Mark McLoughlin  <mark@skynet.ie>
> >                                                                        =
       =20
> >        Fix problem with schemas install. Bug #151334.
> >                                                                        =
       =20
> >        * gconf/gconftool.c: (process_locale_info): install the
> >        global default in the C locale only.
> >
> >Unfortunately this fix causes the problems I described above. I.e. I
> >have no default gtk_theme, and cannot set one because gnome-theme-manage=
r
> >will not start without one. This only occurs if LANG is a recognized loc=
ale
> >in
> >
> >/etc/gconf/gconf.xml.defaults/schemas/desktop/gnome/interface/%gconf.xml
> >
> >If it is not (e.g. "en_GB.UTF-8") then GConf seemingly falls back on the
> >"C" locale. Eventually I ran system-config-language, which on FC2 sets
> >LANG to that value, and so I was able to work around the problem.
> >But this can't be the right solution, since it defeats the GConf
> >localization.
> >
> >Is there something I'm missing, or should this go in bugzilla?
> >
> >
> >Peter Wainwright
> >
> >
> >
> >
> >_______________________________________________
> >gnome-devel-list mailing list
> >gnome-devel-list@gnome.org
> >http://mail.gnome.org/mailman/listinfo/gnome-devel-list
