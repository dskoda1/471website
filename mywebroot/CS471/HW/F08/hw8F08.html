<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en-us"><head><title>Scott's Chap 7 &amp; 8</title>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<meta name="author" content="E Head"></head>
<body>
<div style="text-align: center;">
<h3>Homework Assignment 8</h3>
</div>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"></span>
<ul>
<ul>
<ul>
</ul>
</ul>
</ul>
<ul>
<ul>
</ul>
</ul>
<h3>Assignment due Tuesday Oct 28 7pm :</h3>
Please write you answers short and to the point.

&nbsp;<ol><dl>
</dl>
<li>page 401 exercise 7.17<br></li><li>Here are some type and variable declarations in C syntax:</li>
<dl>
<dd><span style="font-family: monospace;">typedef
&nbsp;struct {<br>
&nbsp; &nbsp;float f;<br>
&nbsp; &nbsp;int a;<br>
} RecA;<br>
<br>
typedef RecA RecB;<br>
<br>
typedef struct {<br>
</span><span style="font-family: monospace;">&nbsp;
&nbsp;float f;<br>
&nbsp; &nbsp;int a;<br>
} RecC;</span><br>
<span style="font-family: monospace;"><br>
RecA w;<br>
RecB x,y;<br>
RecC z;<br>
</span></dd>
<dt>State which variables are type equivalent under (a)
structural equivalence, (b) strict name equivalence, and (c) the actual
C equivalence algorithm.<br>
<br>
</dt>
</dl>
<li>Given the following C program, draw a<a href="memoryC.pdf"> Circle &amp; Box memory</a> diagram of
the variables after the two assignments to **x (line 11, 15 and 17).
&nbsp;What does the program print? &nbsp;Are there any memory
leaks?
Explain. Are there any danging references? Explain.<br><br>
</li>
<dl>
<dd><span style="font-family: monospace;">1:
#include &lt;stdio.h&gt;<br>
2: main() {<br>
3: &nbsp; int **x;<br>
4: &nbsp; int *y;<br>
5: &nbsp; int z;<br>
6: &nbsp; x = (int**) malloc (sizeof(int*));<br>
7: &nbsp; y = (int *) </span><span style="font-family: monospace;"> malloc (sizeof(int));</span><span style="font-family: monospace;"><br>
8: &nbsp; z = 99;<br>
9: &nbsp; *y = 2;<br>
10: &nbsp;*x = y;<br>
11: &nbsp;**x = z;<br>
12: &nbsp;printf("%d\n", *y);<br>
13: &nbsp;z = 3;<br>
14: &nbsp;</span><span style="font-family: monospace;">printf("%d\n",
*y);</span><span style="font-family: monospace;"><br>
15: &nbsp;**x=4;<br>
16: &nbsp;</span><span style="font-family: monospace;"></span><span style="font-family: monospace;">printf("%d\n", z);</span></dd>
<dd><span style="font-family: monospace;"></span><span style="font-family: monospace;">17: &nbsp;x =
&amp;y;</span></dd>
<dd><span style="font-family: monospace;">18: </span><span style="font-family: monospace;">&nbsp;</span><span style="font-family: monospace;"></span><span style="font-family: monospace;">printf("%d\n", **x);</span><br>
<span style="font-family: monospace;">19:
&nbsp;return 0;<br>
20: }</span><br style="font-family: monospace;">
</dd>
</dl>
<dl>
<dt><br>
<br>
</dt>
</dl>
<li>Given the following C++ declaration,</li>
<dl>
<dd><span style="font-family: monospace;">double*
dp = new double(3);<br>
void* vp;<br>
int* ip;</span></dd>
<dt>which of the following assignments does the compiler
complain about?</dt>
<dd><span style="font-family: monospace;"><br>
vp = dp;<br>
dp = vp; <br>
ip = dp; <br>
dp = ip;<br>
ip = vp;<br>
<br>
ip = (int*) vp;<br>
ip = static_cast&lt;int*&gt;(vp);<br>
ip = </span><span style="font-family: monospace;">static_cast&lt;int*&gt;(dp);<br>
ip = reinterpret_cast&lt;int*&gt;(dp);<br>
<br>
</span></dd>
<dt>Briefly explain the behavior of the compiler.
&nbsp;Will *ip ever have the value 3 after one of the assignments
to <span style="font-style: italic;">ip </span>?<br>
<br>
</dt>
</dl>
<li>Perl uses the reference counts for collecting all
dynamically
allocated data. &nbsp;What must the programmer do manually to
prevent
memory leaks? &nbsp;<br>
<br>
<br>
</li>
<li>page 402 exercise 7.24<br><br></li>
<li>page 463 exercise 8.14 Provide details on how you arrive at
your answer.<br>
<br>
</li>
<li>page 403 exercise 7.28<br>
<br>
</li>
<li>Suppose this C++ code</li>
<ol>
<br>
<dd><span style="font-family: monospace;">const
int k = ???; // you need to figure out the value of ???</span><br style="font-family: monospace;">
<span style="font-family: monospace;">int * i = 0;</span><br style="font-family: monospace;">
<span style="font-family: monospace;">struct A {</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;
int x[k];</span><br style="font-family: monospace;">
<span style="font-family: monospace;">};<br></span><br style="font-family: monospace;">
<span style="font-family: monospace;">A*
a = 0; </span><br style="font-family: monospace;">
<span style="font-family: monospace;">printf(
"%d&nbsp;
%d&nbsp;
%d %d&nbsp; %d&nbsp; %d &nbsp;",</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp;i+1, i+k, k, a+k,
&amp;(a[9]),</span><span style="color: rgb(204, 0, 0); font-family: monospace;"> </span><span style="font-family: monospace;">&amp;(a[9])
- (a+1)&nbsp;
);<br></span></dd>
</ol>
<dt>outputs the values for the first two expressions<br>
&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">&nbsp;4
&nbsp;16</span><br>
What are its remaining outputs? &nbsp;Briefly explain how the
output is obtained. &nbsp;(Hint: pay attention to coercion.)</dt>
<ol>
<br>
<br>
</ol><li>C++/C questions ("Thinking in C++" is a good reference)::</li>
<ol style="list-style-type: upper-alpha;">
<li>In C++, what is the difference between assigning a value
to a
pointer and to a reference?<br></li>
<li>In C++, what is the difference between&nbsp; taking
the address
(via operator &amp;)&nbsp; of a pointer and a reference?<br></li>
<li><font color="#000000">What is void * ? Why
have it? void * is not exactly the same in C and C++. Provide an
example that will illustrate the difference between C and C++.</font>&nbsp;<br></li>
<li>Suppose we tried to write a C
procedure what initialize an array to a certain size as follows:<br><br>
</li>
</ol>
<dl>
<dd><span style="font-family: monospace;">&nbsp;
&nbsp;void
init(int a[], int
size) {<br>
</span></dd>
<dd><span style="font-family: monospace;">&nbsp;
&nbsp; &nbsp; &nbsp;a =
(int*)
malloc(size*sizeof(int));<br>
&nbsp; &nbsp;}<br><br>
</span>Will this compile? What if anything, is wrong with
with ? Explain.<br><br></dd>
</dl><ol><dd><span style="font-style: italic;"></span></dd></ol>

<dl>
</dl>
</ol>
<ol>
<ol style="list-style-type: lower-alpha;">
</ol>
<dd></dd>
<ol>
<br>
</ol>
<ol>
<ol>
</ol>
<ol>
<dl>
<dd>
<ol>
<ol>
</ol>
</ol>
</dd>
</dl>
</ol>
</ol>
</ol>
</body></html>