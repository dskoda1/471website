<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>

<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Chap7 --</title></head><body>
<h3>Chapter 7 - continued<br></h3><h4>Pointer vs Reference</h4>
<ul>
<li>A reference type (usually) is like
pointer type with
automatic dereferencing, and only assignment and equality operators.</li>
<ul>
<dl>
<li> It can be alias for an object</li>
<li> All non-primitive types in Java are reference types</li>
<li> C++ has reference type that is usually used for
parameter
passing</li>
</dl>
</ul>
<li> R-value of the Reference can not be separated from the
l-value of the object.</li>
<li> R-value of a Pointer can be separated from the l-value of
the
object pointed to</li>
<ul>
<li>pt and (*pt) are different!</li>
<br>
</ul>
<dl>
<li> Dereferencing</li>
<dl>
<li> Java, not needed</li>
<li> Ada (access type)&nbsp; <b><tt><i>pt</i>.all</tt></b></li>
<li> Pascal <b><i>pt^</i></b></li>
<li> C, C++, <b><i>pt </i>-&gt;, *<i>pt</i></b></li>
</dl>
<li> Dangling pointer problem</li>
<dl>
<li> Deallocation leaves a pointer's value binding invalid</li>
</dl>
<li> Garbage -</li>
<dl>
<li> No current reference to allocated memory (memory leaks)</li>
</dl>
<li> Dereferencing a nil pointer</li>
</dl>
<hr style="width: 100%; height: 2px;"><b>Handling
Pointer Problems</b>
<ul>
<li> Require Pointers to be typed</li>
<li> Do not allow pointer arithmetic</li>
<ul>
&nbsp;
</ul>
<li> Make memory management the job of the language, NOT the
job
of the programmer</li>
<dl>
<br>
<hr size="1" width="100%"><b>Dangling
Pointer Problem</b>
</dl>
<li> Remember dangling pointers
point to deallocated storage.</li>
<ul>
<dl>
<br>
<a href="IMAGES/4danglingPt.gif"><img alt="Dangling Pointers" src="4danglingPt.gif" style="border: 0px solid ; width: 145px; height: 109px;"> </a><br>
<hr size="1" width="100%">
</dl>
</ul>
</ul>
<h4 style="margin-left: 40px;">What&nbsp;can a
language's runtime support provide to help you do to avoid
Dangling
Pointers ?<br>
</h4>
<ul>
<li> Never allow deallocation of memory.</li>
</ul>
<ul>
<dl>
<dl>
<li> Creates lots of garbage</li>
<li> Internally correct.</li>
</dl>
</dl>
</ul>
<ul>
<li> Tombstone by Lomet (1975)</li>
</ul>
<ul>
<ul>
<dl>
<a href="IMAGES/4tomb.gif"><img alt="Tombstones" src="4tomb.gif" style="border: 0px solid ; width: 118px; height: 151px;"> </a><li>Expensive
in time
and space</li>
<li> Good side effect- easy to implement <i>storage
compaction</i></li>
<dl>
<li> Used by Macintosh OS for references to system
objects
such as files and window descriptors.</li>
</dl>
</dl>
</ul>
</ul>
<ul>
<li> Lock and Key by Fischer and LeBlanc 1977, 1980</li>
</ul>
<ul>
<ul>
<a href="IMAGES/4LockKey.gif"><img alt="Lock and Key" src="4LockKey.gif" style="border: 0px solid ; width: 129px; height: 171px;"></a><br>
</ul>
<br>
<a href="IMAGES/4LockKey.gif">
</a>
<hr size="1" width="100%">
<h4> What can you do to reduce memory leaks?</h4>
Garbage Collecting<br>
<li> Lisp pioneered garbage
collecting.&nbsp;
Haskell, Ml, Lisp, and scheme&nbsp; (functional programming
language)
rely on garbage collectors.</li>
<li> Object oriented language like Java, SmallTalk,
Simula 67
and
Eiffel also rely on garbage collectors for the reclamation of memory
during execution.</li>
<li> C++ is the notable exception.&nbsp; C++ retains
the
allocation and deallocation rules of C.</li>
<h4> Garbage Collecting Techniques</h4>
</ul>
</ul>
<ul>
<li> Fundamental techniques</li>
</ul>
<ul>
<ul>
<dl>
<li> Reference counters</li>
<dl>
</dl></dl></ul></ul>
<blockquote>
  <blockquote>
    <blockquote>
      <dl>
        <li> eager approach<br>
        </li>
      </dl>
    </blockquote>
  </blockquote>
</blockquote>
<ul>
  <ul>
    <dl>
      <dl>

      </dl>

<li>Tracing collections</li>
    </dl>

  </ul>

</ul>

<ul>
<ul>
<ul style="list-style-type: disc;">
<li>Mark and sweep</li>
<ul style="list-style-type: circle;">
<li> lazy approach</li>
</ul>
<ul style="list-style-type: circle;">
<li>first proposed by Lisp inventor John McCarthy in
1960<br>
</li>
</ul>
</ul>
</ul>
<ul>
<dl>
<dd><a href="IMAGES/MarkAndSweep.gif"><img alt="Mark and Sweep" src="MarkAndSweep.gif" style="border: 0px solid ; width: 295px; height: 175px;"></a></dd>
</dl>
</ul>
</ul>
<ul>
<div style="margin-left: 40px;">
<ul style="list-style-type: disc;">
<li>Stop and Copy<br>
</li>
</ul>
</div>
<div style="margin-left: 40px;">
<ul>
<ul style="list-style-type: circle;">
<li>Cousin to Mark and Sweep</li>
<li>reduces external fragmentation</li>
</ul>
</ul>
</div>
</ul>
</body></html>